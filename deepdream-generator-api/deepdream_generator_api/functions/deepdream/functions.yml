deepdream-image:
  reservedConcurrency: 100
  image:
    name: deepdream-image
    command:
      - deepdream_generator_api/functions/deepdream/deepdream_image_transform.main
    entryPoint:
      - '/lambda-entrypoint.sh'
  iamRoleStatementsName: deepdream-image-lambda-role
  iamRoleStatements:
    - Effect: Allow
      Action:
        - dynamodb:DescribeTable
        - dynamodb:PutItem
        - dynamodb:GetItem
      Resource:
        - arn:aws:dynamodb:${self:provider.region}:*:table/Files # TODO remove hard coded
  environment: {
    S3_FILE_BUCKET_ID: deepdream-generator-user-data # TODO remove hard coded
  }
  events:
    - sqs:
        arn: arn:aws:sqs:eu-north-1:155802858460:job-queue
        batchSize: 1
